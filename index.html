<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RORC</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap');

    body.rorc-page {
      background: #050505;
      color: #f5f5f5;
    }

    /* Visually hidden heading for accessibility */
    .rorc-visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    /* SECTION (no photo background, just cinematic gradient) */
    .rorc-section {
      position: relative;
      padding: 56px 20px 14px;
      background: #050505;
      color: #f5f5f5;
      font-family: var(--font-body);
      overflow: hidden;
    }

    .rorc-section::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top center, rgba(255,255,255,0.10), transparent 60%),
        linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.9));
      opacity: 1;
      z-index: 0;
    }

    .rorc-inner {
      position: relative;
      z-index: 1;
      max-width: 1100px;
      margin: 0 auto;
    }

    /* HERO */
    .rorc-hero {
      text-align: center;
      max-width: 760px;
      margin: 0 auto 26px;
    }

    .rorc-welcome {
      margin: 0 0 8px;
      font-family: Georgia, serif;
      font-size: 16px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: #ffffff;
    }

    /* LOGO TYPOGRAPHY */
    .rorc-logo-block {
      margin-bottom: 14px;
      line-height: 1.05;
    }

    .rorc-logo-line {
      font-family: 'Alfa Slab One', serif;
      font-size: 32px;
      letter-spacing: 0.9px;
    }

    .rorc-logo-red { color: #c44744; }
    .rorc-logo-white { color: #ffffff; font-size: 30px; }

    .rorc-logo-address {
      font-family: Georgia, serif;
      color: #ffffff;
      font-size: 16px;
      margin-top: 4px;
    }

    /* Larger on desktop */
    @media (min-width: 900px) {
      .rorc-logo-line {
        font-size: 38px;
      }
      .rorc-logo-white {
        font-size: 36px;
      }
      .rorc-logo-address {
        font-size: 17px;
      }
    }

    /* HERO SUBTITLE */
    .rorc-subtitle {
      margin: 12px 0 18px;
      color: #e3e3e3;
      font-size: 15px;
      line-height: 1.7;
    }

    /* GRID */
    .rorc-grid {
      display: grid;
      grid-template-columns: repeat(12, minmax(0,1fr));
      gap: 20px;
    }

    .rorc-card {
      grid-column: span 12;
      background: rgba(10,10,10,0.96);
      border-radius: 16px;
      border: 1px solid rgba(231,210,160,0.25);
      box-shadow: 0 18px 55px rgba(0,0,0,0.9);
      padding: 20px 18px;
    }

    .rorc-card-primary {
      border-color: rgba(153,192,255,0.7);
      box-shadow: 0 22px 60px rgba(22,70,170,0.6);
    }

    @media (min-width: 980px) {
      .rorc-card-primary { grid-column: span 5; }
      .rorc-card:nth-of-type(2) { grid-column: span 4; }
      .rorc-card:nth-of-type(3) { grid-column: span 3; }
    }

    /* CARD CONTENT */
    .rorc-card-title {
      font-family: Georgia, serif;
      font-size: 20px;
      margin: 0 0 8px;
    }
    .rorc-card-text {
      font-size: 14.5px;
      line-height: 1.7;
      color: #f0f0f0;
      margin-bottom: 10px;
    }
    .rorc-list {
      margin-left: 18px;
      margin-bottom: 12px;
      font-size: 14px;
      color: #e4e4e4;
      line-height: 1.6;
    }
    .rorc-note {
      margin-top: 12px;
      font-size: 13px;
      color: #b6c9ff;
    }
    .rorc-hint {
      margin-top: 8px;
      font-size: 13px;
      color: #c0c0c0;
    }

    /* Center actions in all cards */
    .rorc-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
      justify-content: center;
      align-items: center;
    }

    /* BUTTONS */
    .rorc-btn {
      display: inline-block;
      padding: 9px 16px;
      border-radius: 999px;
      border: 1px solid rgba(231,210,160,0.5);
      background: linear-gradient(180deg,#222,#111);
      color: #fff;
      font-family: Georgia, serif;
      font-size: 12.5px;
      font-weight: 600;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      cursor: pointer;
      transition: 0.15s ease;
    }
    .rorc-btn:hover {
      transform: translateY(-1px);
      border-color: #e7d2a0;
    }

    /* Main hero button */
    .rorc-btn-main {
      padding-inline: 22px;
      background: #ffffff;
      color: #000;
      border-color: #ffffff;
      box-shadow: 0 20px 45px rgba(0,0,0,0.85);
    }

    /* Accent (Start Membership) */
    .rorc-btn-accent {
      background: linear-gradient(180deg,#1763ff,#0d3daa);
      border-color: rgba(145,189,255,0.9);
      box-shadow: 0 14px 35px rgba(23,99,255,0.7);
    }

    /* Neutral */
    .rorc-btn-neutral {
      background: linear-gradient(180deg,#262626,#181818);
    }

    /* Ghost */
    .rorc-btn-ghost {
      background: transparent;
      border-color: rgba(255,255,255,0.24);
      color: #f5f5f5;
    }

    /* Danger */
    .rorc-btn-danger {
      background: linear-gradient(180deg,#5a0f0f,#3a0b0b);
      border-color: rgba(255,140,140,0.5);
    }

    /* MODAL */
    .rorc-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.92);
      display: none;
      z-index: 1000;
      flex-direction: column;
    }
    .rorc-modal-head {
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:14px 18px;
      border-bottom:1px solid rgba(231,210,160,0.25);
    }
    .rorc-modal-title {
      margin:0;
      font-family:Georgia,serif;
      font-size:18px;
      color:#f6f6f6;
    }
    .rorc-modal-body {
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .rorc-iframe {
      width:90%;
      height:85%;
      border:none;
      border-radius:12px;
      box-shadow:0 18px 45px rgba(0,0,0,0.85);
    }

    /* Bly Bobcats Merch */
    .merch-band {
      position: relative;
      margin: 18px auto 36px;
      padding: 28px 20px;
      background:
        radial-gradient(500px 220px at 10% -10%, rgba(231,210,160,0.18), transparent 60%),
        radial-gradient(420px 240px at 95% 10%, rgba(196, 71, 68, 0.18), transparent 62%),
        #0a0b0d;
    }
    .merch-band::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: linear-gradient(90deg, rgba(10,11,13,0.95), transparent 18%, transparent 82%, rgba(10,11,13,0.95));
    }
    .merch-inner {
      max-width: 980px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(12, minmax(0, 1fr));
      gap: 18px;
    }
    .merch-inner {
      position: relative;
      z-index: 1;
    }
    .merch-text {
      grid-column: span 12;
      max-width: 680px;
    }
    .merch-kicker {
      text-transform: uppercase;
      letter-spacing: 0.22em;
      font-size: 11px;
      color: rgba(231, 210, 160, 0.7);
      margin-bottom: 6px;
    }
    .merch-title {
      margin: 0 0 6px;
      font: 600 24px/1.2 Georgia, "Times New Roman", serif;
      color: #f6f6f6;
      letter-spacing: 0.02em;
    }
    .merch-sub {
      margin: 0;
      color: #d7d7d7;
      font: 400 14.5px/1.6 var(--font-body);
    }
    .merch-cta {
      grid-column: span 12;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      width: fit-content;
      padding: 2px 8px;
      border-radius: 6px;
      border: 1px solid rgba(231,210,160,.45);
      background: linear-gradient(180deg, #1b1b1b, #101010);
      color: #fff;
      font: 600 10.5px/1 var(--font-display);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
    }
    .merch-cta:hover {
      transform: translateY(-1px);
      border-color: #e7d2a0;
      box-shadow: 0 10px 24px rgba(0,0,0,.4);
    }

    /* Membership Summary */
    .membership-summary {
      max-width: 980px;
      margin: 26px auto 12px;
      padding: 0 20px;
      text-align: center;
    }
    .membership-summary h3 {
      margin: 0 0 6px;
      font: 600 20px/1.2 Georgia, "Times New Roman", serif;
      color: #f6f6f6;
    }
    .membership-summary p {
      margin: 0 0 10px;
      color: #d7d7d7;
      font: 400 14px/1.6 var(--font-body);
    }
    .membership-summary a {
      color: #e7d2a0;
      text-decoration: none;
      font: 600 12px/1 var(--font-display);
      letter-spacing: 0.14em;
      text-transform: uppercase;
    }
    .membership-summary a:hover {
      opacity: 0.85;
    }

    /* Live Status */
    .rorc-live {
      max-width: 980px;
      margin: 12px auto 12px;
      padding: 0 20px;
      text-align: center;
    }
    .rorc-live h3 {
      margin: 0 0 6px;
      font: 600 20px/1.2 Georgia, "Times New Roman", serif;
      color: #f6f6f6;
    }
    .rorc-live p {
      margin: 0;
      color: #d7d7d7;
      font: 400 14px/1.6 var(--font-body);
    }
    .rorc-live strong {
      color: #ffffff;
    }
    .rorc-live-count {
      color: #e7d2a0;
      font-weight: 600;
    }

    .merch-gallery {
      grid-column: span 12;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px;
      margin-top: 6px;
    }

    .merch-item {
      text-decoration: none;
      background: rgba(8,8,8,0.7);
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.06);
      padding: 10px;
      text-align: center;
    }

    .merch-item img {
      width: 100%;
      height: 170px;
      object-fit: contain;
      border-radius: 10px;
      display: block;
    }

    .merch-item span {
      display: block;
      margin-top: 8px;
      font-size: 12px;
      color: #d8d8d8;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .merch-item:hover {
      border-color: rgba(231,210,160,0.4);
      transform: translateY(-2px);
      transition: transform 0.15s ease, border-color 0.15s ease;
    }

    @media (min-width: 900px) {
      .merch-text {
        grid-column: span 7;
      }
      .merch-cta {
        grid-column: span 5;
        justify-self: end;
      }
      .merch-gallery {
        grid-column: span 12;
      }
    }

    /* ===== Home: RORC Carousel ===== */
    .rorc-carousel {
      position: relative;
      padding: 36px 20px 54px;
      background:
        radial-gradient(620px 260px at 10% 0%, rgba(196, 71, 68, 0.22), transparent 60%),
        radial-gradient(520px 280px at 90% 18%, rgba(255, 255, 255, 0.08), transparent 62%),
        #050505;
      overflow: hidden;
    }

    .rorc-carousel::after {
      content: "";
      position: absolute;
      inset: 0;
      background:
        linear-gradient(180deg, rgba(5,5,5,0.25), rgba(5,5,5,0.85)),
        repeating-linear-gradient(120deg, rgba(255,255,255,0.06), rgba(255,255,255,0.06) 1px, transparent 1px, transparent 12px);
      opacity: 0.35;
      pointer-events: none;
    }

    .rorc-carousel-inner {
      position: relative;
      z-index: 1;
      max-width: 1100px;
      margin: 0 auto;
    }

    .rorc-carousel-frame {
      position: relative;
      border-radius: 18px;
      overflow: hidden;
      background: #101318;
      box-shadow: 0 18px 42px rgba(0,0,0,0.6);
      aspect-ratio: 16 / 9;
    }

    .rorc-carousel-slides {
      display: flex;
      width: 100%;
      height: 100%;
      transition: transform 0.5s ease;
    }

    .rorc-carousel-slide {
      min-width: 100%;
      height: 100%;
      position: relative;
    }

    .rorc-carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: saturate(1.08) contrast(1.03);
    }

    .rorc-carousel-controls {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 14px;
      pointer-events: none;
    }

    .rorc-carousel-btn {
      pointer-events: auto;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.4);
      background: rgba(5,5,5,0.65);
      color: #ffffff;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.15s ease, border-color 0.15s ease, background 0.15s ease;
    }

    .rorc-carousel-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(255,255,255,0.7);
      background: rgba(5,5,5,0.8);
    }

    .rorc-carousel-dots {
      position: absolute;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
    }

    .rorc-carousel-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.6);
      background: rgba(255,255,255,0.2);
      cursor: pointer;
      transition: transform 0.15s ease, background 0.15s ease;
    }

    .rorc-carousel-dot.is-active {
      background: #ffffff;
      transform: scale(1.2);
    }

    @media (max-width: 700px) {
      .rorc-carousel-frame {
        aspect-ratio: 4 / 3;
      }
      .rorc-carousel-btn {
        width: 34px;
        height: 34px;
        font-size: 16px;
      }
    }

    /* MOBILE TWEAKS */
    @media (max-width: 600px) {
      .rorc-card { padding: 16px 14px; }
      .rorc-logo-line { font-size: 28px; }
      .rorc-logo-white { font-size: 26px; }
      .rorc-logo-address { font-size: 14px; }
    }
  </style>
</head>

<body class="rorc-page">
  <div class="site-menu">
    <input type="checkbox" id="site-menu-toggle" class="site-menu-toggle" />
    <div class="site-menu-bar">
      <a class="site-menu-brand" href="/">RORC</a>
      <label class="site-menu-button" for="site-menu-toggle">Menu</label>
    </div>
    <label class="site-menu-backdrop" for="site-menu-toggle" aria-hidden="true"></label>
    <div class="site-menu-panel" role="dialog" aria-label="Site menu">
      <label class="site-menu-close" for="site-menu-toggle">Close</label>
      <div>
        <nav class="site-menu-links" aria-label="Site">
          <a href="/">Home</a>
          <a href="/about-rorc/">About</a>
        <a href="/memberships/">Memberships</a>
          <a href="/sponsors/">Sponsors</a>
          <a href="/support/">Support</a>
          <a href="/application/">Application</a>
        </nav>
      </div>
      <div class="site-menu-legal" aria-label="Legal">
        <a href="/privacy-policy/">Privacy Policy</a>
        <a href="/terms-of-service/">Terms of Service</a>
      </div>
    </div>
  </div>
  <!-- ===== RORC · Cinematic Community Section (No Photo Background) ===== -->
  <section class="rorc-section" aria-labelledby="rorc-title">
    <div class="rorc-inner">

      <!-- HERO -->
      <header class="rorc-hero">
        <h1 id="rorc-title" class="rorc-visually-hidden">Ruth Obenchain Recreation Center</h1>

        <h3 class="rorc-welcome">WELCOME TO THE</h3>

        <!-- HTML logo -->
        <div class="rorc-logo-block">
          <div class="rorc-logo-line rorc-logo-red">Ruth Obenchain</div>
          <div class="rorc-logo-line rorc-logo-white">Recreation Center</div>
          <div class="rorc-logo-address">19140 Edler Street</div>
        </div>

        <p class="rorc-subtitle">
          A volunteer-run community gym. From open gym night to event rentals, every membership helps keep this space open and alive for everyone to continue to enjoy.
        </p>

        <div class="rorc-actions">
          <a class="rorc-btn rorc-btn-main" href="/about-rorc/">
            Learn About Our Story
          </a>
          <a class="rorc-btn rorc-btn-ghost" href="/sponsors/">
            View RORC Sponsors
          </a>
        </div>
      </header>

      <!-- GRID -->
      <div class="rorc-grid">

      </div>
    </div>
  </section>

  <!-- ===== Live Status ===== -->
  <section class="rorc-live" aria-label="Current activity">
    <h3>What’s happening at RORC now</h3>
    <p id="rorc-live-text">Loading current status…</p>
  </section>

  <!-- ===== RORC Homepage Carousel ===== -->
  <section class="rorc-carousel" aria-label="RORC photo carousel">
    <div class="rorc-carousel-inner">
      <div class="rorc-carousel-frame">
        <div class="rorc-carousel-slides" id="rorc-carousel-slides"></div>
        <div class="rorc-carousel-controls" aria-hidden="true">
          <button class="rorc-carousel-btn" id="rorc-carousel-prev" type="button" aria-label="Previous photo">
            ‹
          </button>
          <button class="rorc-carousel-btn" id="rorc-carousel-next" type="button" aria-label="Next photo">
            ›
          </button>
        </div>
        <div class="rorc-carousel-dots" id="rorc-carousel-dots" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- ===== Membership Summary ===== -->
  <section class="membership-summary" aria-label="Memberships">
    <h3>Memberships</h3>
    <p>
      Find the membership that matches how you use the gym. Memberships unlock daily access, open gym nights, and
      full use of the facility.
    </p>
    <a href="/memberships/">View Memberships</a>
  </section>

  <!-- ===== Bly Bobcats Merch (opens collection in new tab) ===== -->
  <section class="merch-band" aria-labelledby="fw-bly-title">
    <div class="merch-inner">
      <div class="merch-text">
        <div class="merch-kicker">Support RORC</div>
        <h3 id="fw-bly-title" class="merch-title">Bly Bobcats Merch</h3>
        <p class="merch-sub">
          Shirts, hats, and more. 20% of profits go to the Ruth Obenchain Recreation Center, while the remainder
          supports online maintenance and membership management fees.
        </p>
      </div>
      <a class="merch-cta" href="https://shop.quentinnichols.com/collections/bly-bobcats" target="_blank" rel="noopener">
        View Collection
      </a>
      <div class="merch-gallery" aria-label="Merchandise preview">
        <a class="merch-item" href="https://shop.quentinnichols.com/en-usd/products/bly-bobcats-coffee-cup-white" target="_blank" rel="noopener">
          <img src="Images/Merch/BlyBobcatsCoffeeCup.avif" alt="Bly Bobcats coffee cup" loading="lazy" />
          <span>Bly Bobcats Coffee Cup</span>
        </a>
        <a class="merch-item" href="https://shop.quentinnichols.com/en-usd/products/rorc-bobcats-insulated-tumbler" target="_blank" rel="noopener">
          <img src="Images/Merch/BlyBobcatsTumbler.avif" alt="Bly Bobcats tumbler" loading="lazy" />
          <span>Bly Bobcats Tumbler</span>
        </a>
        <a class="merch-item" href="https://shop.quentinnichols.com/en-usd/products/rorc-hat" target="_blank" rel="noopener">
          <img src="Images/Merch/RORChat.avif" alt="RORC hat" loading="lazy" />
          <span>RORC Hat</span>
        </a>
      </div>
    </div>
  </section>

  <div style="width: 100%; max-width: 900px; margin: 0 auto 40px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
    <iframe
      src="https://calendar.google.com/calendar/embed?src=c_76h3q12d2p9m1m49omkcarh2nc%40group.calendar.google.com&ctz=America%2FLos_Angeles&mode=MONTH&showTitle=0&showPrint=0&showTabs=0&showCalendars=0"
      style="border: 0; width: 100%; height: 700px;"
      frameborder="0">
    </iframe>
  </div>

  <footer class="site-footer">
    <div class="site-footer-inner">
      <div>© 2026 Ruth Obenchain Recreation Center</div>
      <div class="site-footer-links">
        <a href="/support/">Support</a>
        <a href="/privacy-policy/">Privacy Policy</a>
        <a href="/terms-of-service/">Terms of Service</a>
      </div>
      <div>Operated by Bly Community Action Team</div>
    </div>
  </footer>

  <!-- ===== JS ===== -->
  <script>
    /*
      NOTE: Long-term event automation idea

      The best long-term approach is to have the homepage read from a Google Calendar feed
      and compute “now” + “next event” from that.

      Two workable paths:

      1) Google Calendar JSON feed (public) + client JS
         - Make a calendar public.
         - Use the public JSON feed to pull upcoming events.
         - Compute “current event” + “next event” in JS.
         - Pros: simple, no server; Cons: public calendar, rate limits.

      2) Google Apps Script proxy
         - Calendar can stay private.
         - Apps Script returns just the events you need (today + next).
         - Your page calls the script (similar to your stats script).
         - Pros: private; Cons: requires script setup.
    */
    function rorcFormatTimeLabel(hour, minute) {
      const h = hour % 12 || 12;
      const mm = minute.toString().padStart(2, "0");
      return `${h}:${mm}`;
    }

    function rorcTimeInMinutes(hour, minute) {
      return (hour * 60) + minute;
    }

    function rorcGetPacificNow() {
      const now = new Date();
      const parts12 = new Intl.DateTimeFormat("en-US", {
        timeZone: "America/Los_Angeles",
        weekday: "short",
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "2-digit",
        hour12: true
      }).formatToParts(now);

      const parts24 = new Intl.DateTimeFormat("en-US", {
        timeZone: "America/Los_Angeles",
        weekday: "short",
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      }).formatToParts(now);

      const lookup12 = Object.fromEntries(parts12.map(p => [p.type, p.value]));
      const lookup24 = Object.fromEntries(parts24.map(p => [p.type, p.value]));

      const weekday = lookup12.weekday || lookup24.weekday;
      const year = Number(lookup12.year || lookup24.year);
      const month = Number(lookup12.month || lookup24.month);
      const day = Number(lookup12.day || lookup24.day);
      const minute = Number(lookup12.minute || lookup24.minute);

      const hour24 = Number(lookup24.hour);
      const rawHour = Number(lookup12.hour);
      const period = (lookup12.dayPeriod || "").toLowerCase();
      const hour12 = (period === "pm" && rawHour < 12)
        ? rawHour + 12
        : (period === "am" && rawHour === 12 ? 0 : rawHour);
      const hour = Number.isFinite(hour24) ? hour24 : hour12;

      return { weekday, year, month, day, hour, minute };
    }

    function rorcGetNextEventLabel() {
      const { weekday, year, month, day, hour, minute } = rorcGetPacificNow();
      const weekdays = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];
      const dayIndex = weekdays.indexOf(weekday.toLowerCase());
      const nowMinutes = rorcTimeInMinutes(hour, minute);
      const todayOrdinal = Math.floor(Date.UTC(year, month - 1, day) / 86400000);

      const events = [
        { day: 2, start: rorcTimeInMinutes(15, 0), label: "Afterschool program hosted by Klamath Basin Youth Development", range: "3:00–5:30 PM" },
        { day: 2, start: rorcTimeInMinutes(18, 0), label: "Open gym", range: "6:00–8:00 PM" },
        { day: 4, start: rorcTimeInMinutes(15, 0), label: "Afterschool program hosted by Klamath Basin Youth Development", range: "3:00–5:30 PM" },
        { day: 4, start: rorcTimeInMinutes(18, 0), label: "Open gym", range: "6:00–8:00 PM" }
      ];

      const specialEvent = {
        dateOrdinal: Math.floor(Date.UTC(2026, 2, 14) / 86400000),
        label: "Facility closed for Madison Melsness baby shower",
        range: "All day"
      };

      let best = null;
      events.forEach((event) => {
        let deltaDays = (event.day - dayIndex + 7) % 7;
        let minutesUntil = (deltaDays * 1440) + (event.start - nowMinutes);
        if (deltaDays === 0 && event.start <= nowMinutes) {
          minutesUntil = (7 * 1440) + (event.start - nowMinutes);
          deltaDays = 7;
        }
        if (minutesUntil < 0) {
          minutesUntil += 7 * 1440;
        }
        if (!best || minutesUntil < best.minutesUntil) {
          best = {
            minutesUntil,
            day: event.day,
            label: event.label,
            range: event.range
          };
        }
      });

      const specialMinutesUntil = (specialEvent.dateOrdinal - todayOrdinal) * 1440;
      if (specialMinutesUntil >= 0 && (!best || specialMinutesUntil < best.minutesUntil)) {
        const dayName = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"][new Date(Date.UTC(2026, 2, 14)).getUTCDay()];
        return `Next event: ${specialEvent.label} on ${dayName}, March 14, 2026 (${specialEvent.range}).`;
      }

      if (!best) return "Next event: schedule coming soon.";
      const dayName = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"][best.day];
      return `Next event: ${best.label} ${dayName} ${best.range}.`;
    }

    function rorcGetStatusMessage() {
      const { weekday, year, month, day, hour, minute } = rorcGetPacificNow();
      const dayName = weekday.toLowerCase();
      const nowMinutes = rorcTimeInMinutes(hour, minute);

      const isTueThu = dayName === "tue" || dayName === "thu";

      const generalOpenStart = rorcTimeInMinutes(7, 0);
      const generalOpenEnd = rorcTimeInMinutes(21, 0);
      const afterSchoolStart = rorcTimeInMinutes(15, 0);
      const afterSchoolEnd = rorcTimeInMinutes(17, 30);
      const openGymStart = rorcTimeInMinutes(18, 0);
      const openGymEnd = rorcTimeInMinutes(20, 0);

      const inAfterSchool = isTueThu && nowMinutes >= afterSchoolStart && nowMinutes < afterSchoolEnd;
      const inOpenGym = isTueThu && nowMinutes >= openGymStart && nowMinutes < openGymEnd;
      const inGeneralOpen = nowMinutes >= generalOpenStart && nowMinutes < generalOpenEnd;
      const nextEvent = rorcGetNextEventLabel();
      const isClosureDate = (year === 2026 && month === 3 && day === 14);

      if (isClosureDate) {
        return { text: "Facility closed today for Madison Melsness baby shower (all day).", nextEvent: "", showCount: false };
      }

      if (inAfterSchool) {
        return { text: `Afterschool program in progress (3:00–5:30 PM), hosted by Klamath Basin Youth Development. Membership use is closed during this time.`, nextEvent, showCount: false };
      }
      if (inOpenGym) {
        return { text: "Open gym night in progress (6:00–8:00 PM).", nextEvent, showCount: true };
      }

      if (!inGeneralOpen) {
        return { text: "Facility is currently closed. Membership hours are 7:00 AM–9:00 PM.", nextEvent, showCount: true };
      }

      if (isTueThu && nowMinutes < afterSchoolStart) {
        return { text: "Membership use is open 7:00 AM–9:00 PM.", nextEvent, showCount: true };
      }
      if (isTueThu && nowMinutes >= afterSchoolEnd && nowMinutes < openGymStart) {
        return { text: "Membership use is open 7:00 AM–9:00 PM.", nextEvent, showCount: true };
      }
      if (isTueThu && nowMinutes >= openGymEnd) {
        return { text: "Membership use is open 7:00 AM–9:00 PM.", nextEvent, showCount: true };
      }

      return { text: "Membership use is open 7:00 AM–9:00 PM.", nextEvent, showCount: true };
    }

    function rorcRenderLiveStatus(data) {
      const rawOccupancy = data.occupancyCount ?? "–";
      const occupancy = (rawOccupancy === 1 || rawOccupancy === "1") ? "1" : rawOccupancy;
      const liveText = document.getElementById("rorc-live-text");
      if (!liveText) return;
      const status = rorcGetStatusMessage();
      const noun = (occupancy === "1") ? "member" : "members";
      const countLine = (occupancy === "0" || occupancy === 0 || occupancy === "–")
        ? "No members are signed in right now."
        : `Currently <span class=\"rorc-live-count\">${occupancy}</span> ${noun} signed in.`;

      const lines = [status.text];
      if (status.nextEvent) {
        lines.push(status.nextEvent);
      }
      if (status.showCount) {
        lines.push(countLine);
      }
      liveText.innerHTML = lines.join("<br>");
    }

    function rorcLiveLoaded(data) {
      rorcRenderLiveStatus(data);
    }

    const rorcCarouselImages = [
      { src: "Images/RORC Homepage/RORC-HomepageGallery1.jpg", alt: "RORC gym interior" },
      { src: "Images/RORC Homepage/RORC-HomepageGallery2.jpg", alt: "RORC community moment" },
      { src: "Images/RORC Homepage/RORC-HomepageGallery3.jpg", alt: "RORC activity highlight" },
      { src: "Images/RORC Homepage/RORC-HomepageGallery4.JPG", alt: "RORC event gathering" },
      { src: "Images/RORC Homepage/RORC-HomepageGallery5.jpg", alt: "RORC gym detail" },
      { src: "Images/RORC Homepage/IMG_20190318_194411.jpg", alt: "RORC open gym" }
    ];

    function shuffleRorcCarousel(items){
      const copy = items.slice();
      for (let i = copy.length - 1; i > 0; i -= 1) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function renderRorcCarousel(){
      const slides = document.getElementById('rorc-carousel-slides');
      const dots = document.getElementById('rorc-carousel-dots');
      if (!slides || !dots) return;

      const shuffled = shuffleRorcCarousel(rorcCarouselImages);
      slides.dataset.total = String(shuffled.length);
      slides.dataset.index = "0";

      shuffled.forEach((image, index) => {
        const slide = document.createElement('div');
        slide.className = 'rorc-carousel-slide';

        const img = document.createElement('img');
        img.src = encodeURI(image.src);
        img.alt = image.alt;
        img.loading = index === 0 ? "eager" : "lazy";

        slide.appendChild(img);
        slides.appendChild(slide);

        const dot = document.createElement('button');
        dot.className = 'rorc-carousel-dot';
        dot.type = 'button';
        dot.setAttribute('aria-label', `Go to photo ${index + 1}`);
        dot.addEventListener('click', () => setRorcSlide(index));
        dots.appendChild(dot);
      });

      updateRorcCarousel();
    }

    function setRorcSlide(nextIndex){
      const slides = document.getElementById('rorc-carousel-slides');
      if (!slides) return;
      const total = Number(slides.dataset.total || "0");
      if (!total) return;
      const newIndex = (nextIndex + total) % total;
      slides.dataset.index = String(newIndex);
      updateRorcCarousel();
    }

    function updateRorcCarousel(){
      const slides = document.getElementById('rorc-carousel-slides');
      const dots = document.getElementById('rorc-carousel-dots');
      if (!slides || !dots) return;

      const index = Number(slides.dataset.index || "0");
      slides.style.transform = `translateX(-${index * 100}%)`;

      Array.from(dots.children).forEach((dot, dotIndex) => {
        dot.classList.toggle('is-active', dotIndex === index);
      });
    }

    function startRorcCarousel(){
      const prevBtn = document.getElementById('rorc-carousel-prev');
      const nextBtn = document.getElementById('rorc-carousel-next');
      let timer = null;

      function resetTimer(){
        if (timer) {
          clearInterval(timer);
        }
        timer = setInterval(() => setRorcSlide(Number(document.getElementById('rorc-carousel-slides').dataset.index || "0") + 1), 5000);
      }

      if (prevBtn) {
        prevBtn.addEventListener('click', () => {
          setRorcSlide(Number(document.getElementById('rorc-carousel-slides').dataset.index || "0") - 1);
          resetTimer();
        });
      }

      if (nextBtn) {
        nextBtn.addEventListener('click', () => {
          setRorcSlide(Number(document.getElementById('rorc-carousel-slides').dataset.index || "0") + 1);
          resetTimer();
        });
      }

      resetTimer();
    }

    renderRorcCarousel();
    startRorcCarousel();
  </script>
  <script src="https://script.google.com/macros/s/AKfycbzaObDgkBen2S8yQPZzNKEyj4t-4p2Itge37e-ot8tVT7nqDH6NO5-jEIY9SnwWpHhlJA/exec?callback=rorcLiveLoaded"></script>
</body>
</html>
